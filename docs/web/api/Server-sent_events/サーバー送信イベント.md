
# サーバー送信イベント 

[MDN: サーバー送信イベント](https://developer.mozilla.org/ja/docs/Web/API/Server-sent_events)

## 概要
- 通常はクライアント（ブラウザ）がサーバーにリクエストを送ってデータを取得する  
- **SSE** を使うと、サーバー側からブラウザへ **一方向のメッセージをプッシュ送信**できる  
- 受信したメッセージは、ブラウザ内でイベントやデータとして処理可能  

## 特徴
- Web Worker 内でも利用可能  
- **Firefox の制限**: サービスワーカーでは未対応（専用ワーカー / 共有ワーカーでは対応）  
  - [関連バグ: Bug 1681218](https://bugzilla.mozilla.org/show_bug.cgi?id=1681218)  

## インターフェイス
- **`EventSource`**  
  - サーバーへの接続管理  
  - イベント受信  
  - エラー処理  
  - コネクション切断 など  

## 例

### サーバー (PHP)
```php
<?php
header('Content-Type: text/event-stream');
header('Cache-Control: no-cache');

echo "data: The server time is: " . date("H:i:s") . "\n\n";
flush();
?>
クライアント (JavaScript)
js
コードをコピーする
const evtSource = new EventSource("/sse.php");

evtSource.onmessage = (e) => {
  console.log("新しいメッセージ:", e.data);
};
```

