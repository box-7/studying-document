https://github.com/appleboy/ssh-action?utm_source=chatgpt.com

# ğŸ“– ã¯ã˜ã‚ã«
**SSH for GitHub Actions** ã¯ã€CI/CD ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†…ã§ãƒªãƒ¢ãƒ¼ãƒˆ SSH ã‚³ãƒãƒ³ãƒ‰ã‚’ç°¡å˜ã‹ã¤å®‰å…¨ã«å®Ÿè¡Œã™ã‚‹ãŸã‚ã®å¼·åŠ›ãª GitHub Action ã§ã™ã€‚  
Golang ã¨ `drone-ssh` ã§æ§‹ç¯‰ã•ã‚Œã¦ãŠã‚Šã€ãƒãƒ«ãƒãƒ›ã‚¹ãƒˆã€ãƒ—ãƒ­ã‚­ã‚·ã€é«˜åº¦ãªèªè¨¼ã‚’å«ã‚€å¹…åºƒã„ SSH ã‚·ãƒŠãƒªã‚ªã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

## ssh ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
ãƒ¡ã‚¤ãƒ³ãƒ–ãƒ©ãƒ³ãƒã®ãƒ†ã‚¹ãƒˆ

---

# ğŸ§© åŸºæœ¬æ¦‚å¿µã¨å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
ã“ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã¯è±Šå¯Œãªè¨­å®šã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«ã‚ˆã‚ŠæŸ”è»Ÿãª SSH ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã‚’æä¾›ã—ã¾ã™ã€‚  
è©³ç´°ã¯ `action.yml` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ğŸ”Œ æ¥ç¶šè¨­å®š
ã“ã‚Œã‚‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®ãƒªãƒ¢ãƒ¼ãƒˆãƒ›ã‚¹ãƒˆæ¥ç¶šæ–¹æ³•ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿              | èª¬æ˜                                        | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|------------------------|-------------------------------------------|-----------|
| host                   | SSHãƒ›ã‚¹ãƒˆã‚¢ãƒ‰ãƒ¬ã‚¹                            |           |
| port                   | SSHãƒãƒ¼ãƒˆç•ªå·                                | 22        |
| username               | SSHãƒ¦ãƒ¼ã‚¶ãƒ¼å                                |           |
| password               | SSHãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰                                |           |
| protocol               | SSHãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³ (tcp, tcp4, tcp6)   | tcp       |
| sync                   | è¤‡æ•°ãƒ›ã‚¹ãƒˆæŒ‡å®šæ™‚ã®åŒæœŸå®Ÿè¡Œ                  | false     |
| timeout                | ãƒ›ã‚¹ãƒˆã¸ã®SSHæ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ               | 30ç§’      |
| key                    | SSHç§˜å¯†éµã®å†…å®¹ (ä¾‹: `~/.ssh/id_rsa` ã®ç”Ÿãƒ‡ãƒ¼ã‚¿) |           |
| key_path               | SSHç§˜å¯†éµã®ãƒ‘ã‚¹                              |           |
| passphrase             | SSHç§˜å¯†éµã®ãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚º                      |           |
| ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆ     | ãƒ›ã‚¹ãƒˆå…¬é–‹éµã®SHA256ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆ      |           |
| use_insecure_cipher    | è¿½åŠ ã®ï¼ˆã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã®ä½ã„ï¼‰æš—å·æ–¹å¼ã‚’è¨±å¯ã™ã‚‹ | false     |
| æš—å·æ–¹å¼                | è¨±å¯ã•ã‚Œã‚‹æš—å·ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€‚æŒ‡å®šãŒãªã„å ´åˆã¯é©åˆ‡ãªãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚’ä½¿ç”¨ |           |

---

## ğŸ› ï¸ SSHã‚³ãƒãƒ³ãƒ‰è¨­å®š
ã“ã‚Œã‚‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ãƒªãƒ¢ãƒ¼ãƒˆãƒ›ã‚¹ãƒˆã§å®Ÿè¡Œã•ã‚Œã‚‹ã‚³ãƒãƒ³ãƒ‰ã¨é–¢é€£ã™ã‚‹å‹•ä½œã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿            | èª¬æ˜                                                 | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|----------------------|----------------------------------------------------|-----------|
| script               | ãƒªãƒ¢ãƒ¼ãƒˆã§å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰                            |           |
| script_path          | ãƒªãƒ¢ãƒ¼ãƒˆã§å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰ã‚’å«ã‚€ãƒªãƒã‚¸ãƒˆãƒªå†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ãƒ‘ã‚¹ |           |
| envs                 | ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«æ¸¡ã™ç’°å¢ƒå¤‰æ•°                        |           |
| envs_format          | ç’°å¢ƒå¤‰æ•°è»¢é€ã®æŸ”è»Ÿãªè¨­å®š                              |           |
| allenvs              | GITHUB_ ãŠã‚ˆã³ INPUT_ ãƒ—ãƒ¬ãƒ•ã‚£ãƒƒã‚¯ã‚¹ä»˜ãã®å…¨ç’°å¢ƒå¤‰æ•°ã‚’ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«æ¸¡ã™ | false     |
| command_timeout      | SSHã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œã®ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ                         | 10m       |
| debug                | ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã‚’æœ‰åŠ¹åŒ–                                | false     |
| request_pty          | ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰ç–‘ä¼¼ç«¯æœ«ã‚’è¦æ±‚                            | false     |
| curl_insecure        | è¨¼æ˜æ›¸ãªã—ã§SSLã‚µã‚¤ãƒˆã¸ã®curlæ¥ç¶šã‚’è¨±å¯                 | false     |
| version              | drone-sshãƒã‚¤ãƒŠãƒªãƒãƒ¼ã‚¸ãƒ§ãƒ³ã€‚æŒ‡å®šã—ãªã„å ´åˆã€æœ€æ–°ç‰ˆãŒä½¿ç”¨ã•ã‚Œã¾ã™ |           |

---

## ğŸŒ ãƒ—ãƒ­ã‚­ã‚·è¨­å®š
ã“ã‚Œã‚‰ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãƒ›ã‚¹ãƒˆã¸ã®æ¥ç¶šã«ãƒ—ãƒ­ã‚­ã‚·ï¼ˆã‚¸ãƒ£ãƒ³ãƒ—ãƒ›ã‚¹ãƒˆï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’åˆ¶å¾¡ã—ã¾ã™ã€‚

| ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿               | èª¬æ˜                                        | ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ |
|-------------------------|-------------------------------------------|-----------|
| proxy_host              | SSHãƒ—ãƒ­ã‚­ã‚·ãƒ›ã‚¹ãƒˆ                            |           |
| proxy_port              | SSHãƒ—ãƒ­ã‚­ã‚·ãƒãƒ¼ãƒˆ                            | 22        |
| proxy_username          | SSHãƒ—ãƒ­ã‚­ã‚·ãƒ¦ãƒ¼ã‚¶ãƒ¼å                        |           |
| proxy_password          | SSHãƒ—ãƒ­ã‚­ã‚·ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰                        |           |
| proxy_passphrase        | SSHãƒ—ãƒ­ã‚­ã‚·éµãƒ‘ã‚¹ãƒ•ãƒ¬ãƒ¼ã‚º                     |           |
| proxy_protocol          | SSHãƒ—ãƒ­ã‚­ã‚·ãƒ—ãƒ­ãƒˆã‚³ãƒ«ãƒãƒ¼ã‚¸ãƒ§ãƒ³              | tcp       |
| proxy_timeout           | ãƒ—ãƒ­ã‚­ã‚·ãƒ›ã‚¹ãƒˆã¸ã®SSHæ¥ç¶šã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ        | 30ç§’      |
| proxy_key               | SSHãƒ—ãƒ­ã‚­ã‚·ç§˜å¯†éµã®å†…å®¹                       |           |
| proxy_key_path          | SSHãƒ—ãƒ­ã‚­ã‚·ç§˜å¯†éµã®ãƒ‘ã‚¹                        |           |
| proxy_fingerprint       | ãƒ—ãƒ­ã‚­ã‚·ãƒ›ã‚¹ãƒˆå…¬é–‹éµã®SHA256ãƒ•ã‚£ãƒ³ã‚¬ãƒ¼ãƒ—ãƒªãƒ³ãƒˆ |           |
| proxy_cipher            | ãƒ—ãƒ­ã‚­ã‚·ã§è¨±å¯ã•ã‚Œã‚‹æš—å·ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ           |           |
| proxy_use_insecure_cipher | ãƒ—ãƒ­ã‚­ã‚·ã§å®‰å…¨ã§ãªã„æš—å·ã®ä½¿ç”¨ã‚’è¨±å¯           | false     |

> æ³¨: å‰Šé™¤ã•ã‚ŒãŸ `script_stop` ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æ¨¡å€£ã™ã‚‹ã«ã¯ã€ã‚·ã‚§ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å…ˆé ­ã« `set -e` ã‚’è¿½åŠ ã—ã¦ãã ã•ã„ã€‚

---

## âš¡ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ
æœ€å°é™ã®è¨­å®šã§ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼å†…ã§ãƒªãƒ¢ãƒ¼ãƒˆ SSH ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œ:

```yaml
name: ãƒªãƒ¢ãƒ¼ãƒˆ SSH ã‚³ãƒãƒ³ãƒ‰
on: [push]

jobs:
  build:
    name: Build
    runs-on: ubuntu-latest
    steps:
      - name: ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ç”¨ã—ãŸãƒªãƒ¢ãƒ¼ãƒˆSSHã‚³ãƒãƒ³ãƒ‰ã®å®Ÿè¡Œ
        uses: appleboy/ssh-action@v1
        with:
          host: ${{ secrets.HOST }}
          username: linuxserver.io
          password: ${{ secrets.PASSWORD }}
          port: ${{ secrets.PORT }}
          script: whoami
```
```
Output:
markdown
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
======CMD======
whoami
======END======
linuxserver.io
===============================================
âœ… ã™ã¹ã¦ã®ãƒ›ã‚¹ãƒˆã§ã‚³ãƒãƒ³ãƒ‰ã‚’æ­£å¸¸ã«å®Ÿè¡Œã—ã¾ã—ãŸã€‚
===============================================
```




